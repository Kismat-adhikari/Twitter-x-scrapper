# Cookie Setup Guide - Get Real Engagement Metrics

## Why Cookies Are Required

Twitter/X's API returns **real engagement metrics** (likes, retweets, replies) only when you're authenticated. Without proper cookies:

- ‚ùå All engagement shows as 0
- ‚ùå Limited search results
- ‚ùå Aggressive rate limiting
- ‚ùå Some tweets don't load

With proper cookies:

- ‚úÖ Real engagement numbers
- ‚úÖ Full tweet data
- ‚úÖ Better rate limits
- ‚úÖ More search results

---

## Required Cookies

You need these two cookies from your logged-in Twitter/X session:

1. **auth_token** - Your authentication token
2. **ct0** - CSRF token (Cross-Site Request Forgery protection)

---

## Method 1: Browser Developer Tools (Recommended)

### Step 1: Log in to Twitter/X

1. Open your browser (Chrome, Firefox, Edge, etc.)
2. Go to https://x.com
3. **Log in** to your account
4. Make sure you're fully logged in (can see your timeline)

### Step 2: Open Developer Tools

**Chrome/Edge:**
- Press `F12` or `Ctrl+Shift+I` (Windows/Linux)
- Press `Cmd+Option+I` (Mac)

**Firefox:**
- Press `F12` or `Ctrl+Shift+I` (Windows/Linux)
- Press `Cmd+Option+I` (Mac)

### Step 3: Navigate to Cookies

1. Click the **Application** tab (Chrome/Edge) or **Storage** tab (Firefox)
2. In the left sidebar, expand **Cookies**
3. Click on **https://x.com**

### Step 4: Find Required Cookies

Look for these two cookies in the list:

1. **auth_token**
   - Name: `auth_token`
   - Value: Long string (40-50 characters)
   - Example: `a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0`

2. **ct0**
   - Name: `ct0`
   - Value: Long string (40-50 characters)
   - Example: `z9y8x7w6v5u4t3s2r1q0p9o8n7m6l5k4j3i2h1g0`

### Step 5: Copy Cookie Values

1. Click on **auth_token** in the list
2. **Copy** the Value (double-click to select, then Ctrl+C)
3. Save it somewhere temporarily
4. Repeat for **ct0**

### Step 6: Create Cookie File

1. Open a text editor (Notepad, VS Code, etc.)
2. Create a new file named `x.com_cookies.txt`
3. Paste this template:

```
# Netscape HTTP Cookie File
# This file was generated by your browser
.x.com	TRUE	/	TRUE	1735689600	auth_token	YOUR_AUTH_TOKEN_HERE
.x.com	TRUE	/	TRUE	1735689600	ct0	YOUR_CT0_HERE
```

4. **Replace** `YOUR_AUTH_TOKEN_HERE` with your actual auth_token value
5. **Replace** `YOUR_CT0_HERE` with your actual ct0 value
6. **Save** the file in your scraper directory (same folder as `main.py`)

### Example Cookie File

```
# Netscape HTTP Cookie File
.x.com	TRUE	/	TRUE	1735689600	auth_token	a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0
.x.com	TRUE	/	TRUE	1735689600	ct0	z9y8x7w6v5u4t3s2r1q0p9o8n7m6l5k4j3i2h1g0
```

---

## Method 2: Browser Extension (Easier)

### Using "Get cookies.txt" Extension

1. **Install Extension:**
   - Chrome: [Get cookies.txt](https://chrome.google.com/webstore/detail/get-cookiestxt/bgaddhkoddajcdgocldbbfleckgcbcid)
   - Firefox: [cookies.txt](https://addons.mozilla.org/en-US/firefox/addon/cookies-txt/)

2. **Log in to Twitter/X:**
   - Go to https://x.com
   - Make sure you're logged in

3. **Export Cookies:**
   - Click the extension icon
   - Click "Export" or "Get cookies.txt"
   - Save as `x.com_cookies.txt`

4. **Move File:**
   - Move `x.com_cookies.txt` to your scraper directory

---

## Method 3: Manual Cookie String (Advanced)

If you have cookies in a different format, you can convert them:

### From JSON Format

If you have cookies like this:

```json
[
  {"name": "auth_token", "value": "abc123...", "domain": ".x.com"},
  {"name": "ct0", "value": "xyz789...", "domain": ".x.com"}
]
```

Convert to Netscape format:

```
.x.com	TRUE	/	TRUE	1735689600	auth_token	abc123...
.x.com	TRUE	/	TRUE	1735689600	ct0	xyz789...
```

### From Browser Console

Run this in browser console on x.com:

```javascript
document.cookie.split(';').forEach(c => console.log(c.trim()));
```

Look for `auth_token=...` and `ct0=...` and extract the values.

---

## Verifying Your Cookies

### Test 1: File Exists

```bash
# Check if file exists
ls x.com_cookies.txt

# Or on Windows
dir x.com_cookies.txt
```

### Test 2: File Content

Open `x.com_cookies.txt` and verify:

- ‚úÖ Has `auth_token` line
- ‚úÖ Has `ct0` line
- ‚úÖ Values are long strings (40+ characters)
- ‚úÖ No placeholder text like "YOUR_AUTH_TOKEN_HERE"

### Test 3: Run Test Script

```bash
python test_real_engagement.py
```

Look for:
```
‚úÖ Found x.com_cookies.txt
üîê Added X cookies for authentication
```

If you see:
```
‚ö†Ô∏è  WARNING: x.com_cookies.txt not found!
```

The file is missing or in the wrong location.

---

## Troubleshooting

### Problem: "Cookies not found"

**Solution:**
1. Make sure `x.com_cookies.txt` is in the same directory as `main.py`
2. Check the filename (no typos, correct extension)
3. Verify file is not empty

### Problem: "Still getting 0 engagement"

**Solution:**
1. Cookies may be expired - get fresh cookies
2. Make sure you copied the full cookie values
3. Verify you're logged in to Twitter when copying cookies
4. Try logging out and back in to Twitter, then get new cookies

### Problem: "Invalid cookie format"

**Solution:**
1. Use the exact Netscape format shown above
2. Make sure tabs are actual TAB characters, not spaces
3. Each cookie should be on its own line
4. File should start with `# Netscape HTTP Cookie File`

### Problem: "Cookies expire quickly"

**Explanation:**
- Twitter cookies typically last 30-90 days
- If you log out of Twitter, cookies become invalid
- Changing your password invalidates cookies

**Solution:**
- Stay logged in to Twitter
- Refresh cookies monthly
- Don't change your password unnecessarily

---

## Security Notes

### Keep Cookies Private

‚ö†Ô∏è **IMPORTANT:** Your cookies are like your password!

- ‚ùå Don't share your `x.com_cookies.txt` file
- ‚ùå Don't commit it to Git (add to `.gitignore`)
- ‚ùå Don't post cookie values online
- ‚úÖ Keep the file on your local machine only

### What Someone Can Do With Your Cookies

If someone gets your cookies, they can:
- Access your Twitter account
- Post tweets as you
- Read your DMs
- Change your settings

### Protecting Your Cookies

1. **Add to .gitignore:**
   ```
   x.com_cookies.txt
   *.txt
   ```

2. **Set file permissions (Linux/Mac):**
   ```bash
   chmod 600 x.com_cookies.txt
   ```

3. **Delete when done:**
   ```bash
   rm x.com_cookies.txt
   ```

4. **Use a dedicated account:**
   - Create a separate Twitter account for scraping
   - Don't use your personal account

---

## Cookie Lifespan

### How Long Do Cookies Last?

- **Typical:** 30-90 days
- **If you stay logged in:** Longer
- **If you log out:** Immediately invalid
- **If you change password:** Immediately invalid

### When to Refresh Cookies

Refresh your cookies if:
- Scraper starts returning 0 engagement again
- You see authentication errors
- You logged out of Twitter
- You changed your Twitter password
- It's been more than 30 days

### How to Refresh

1. Log in to Twitter again
2. Follow the cookie extraction steps above
3. Replace the old `x.com_cookies.txt` file
4. Run the scraper again

---

## Alternative: Session Cookies

If you want cookies that last longer:

1. **Stay logged in** to Twitter
2. **Don't log out** (cookies stay valid)
3. **Use "Remember me"** when logging in
4. **Don't clear browser cookies**

---

## Quick Reference

### Minimum Required Cookies

```
.x.com	TRUE	/	TRUE	1735689600	auth_token	YOUR_VALUE_HERE
.x.com	TRUE	/	TRUE	1735689600	ct0	YOUR_VALUE_HERE
```

### File Location

```
your-scraper-folder/
‚îú‚îÄ‚îÄ main.py
‚îú‚îÄ‚îÄ x.com_cookies.txt  ‚Üê Put it here!
‚îú‚îÄ‚îÄ scraper/
‚îî‚îÄ‚îÄ scraped_data/
```

### Test Command

```bash
python test_real_engagement.py
```

### Expected Output

```
‚úÖ Found x.com_cookies.txt
üîê Added 2 cookies for authentication
‚úÖ API tweet - username: 123 likes, 45 RTs, 10 replies
```

---

## Summary

1. **Log in** to Twitter/X in your browser
2. **Open Developer Tools** (F12)
3. **Go to Application/Storage** ‚Üí Cookies ‚Üí x.com
4. **Copy** `auth_token` and `ct0` values
5. **Create** `x.com_cookies.txt` with Netscape format
6. **Save** in scraper directory
7. **Run** scraper and get real engagement!

For more help:
- [REAL_ENGAGEMENT_FIX.md](REAL_ENGAGEMENT_FIX.md) - Complete engagement fix guide
- [QUICK_START_ENGAGEMENT.md](QUICK_START_ENGAGEMENT.md) - Quick start guide

---

**Status:** ‚úÖ Ready to Use  
**Difficulty:** Easy (5 minutes)  
**Security:** Keep cookies private!
